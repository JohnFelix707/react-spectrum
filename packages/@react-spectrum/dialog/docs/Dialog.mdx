<!-- Copyright 2020 Adobe. All rights reserved.
This file is licensed to you under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License. You may obtain a copy
of the License at http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS
OF ANY KIND, either express or implied. See the License for the specific language
governing permissions and limitations under the License. -->

import {Layout} from '@react-spectrum/docs';
export default Layout;

import docs from 'docs:@react-spectrum/dialog';
import {HeaderInfo, PropTable} from '@react-spectrum/docs';
import packageData from '../package.json';

```jsx import
import {ActionButton, Button, ButtonGroup} from '@react-spectrum/button';
import {Content, Footer, Header} from '@react-spectrum/view';
import {Checkbox} from '@react-spectrum/checkbox';
import {Dialog, DialogTrigger} from '@react-spectrum/dialog';
import {Divider} from '@react-spectrum/divider';
import {Form} from '@react-spectrum/form';
import {Heading, Text} from '@react-spectrum/typography';
import {Image} from '@react-spectrum/image';
import {TextField} from '@react-spectrum/textfield';
```

# Dialog

<p>{docs.exports.Dialog.description}</p>

<HeaderInfo
  packageData={packageData}
  componentNames={['Dialog']}
  sourceData={[
    {type: 'Spectrum', url: 'https://spectrum.adobe.com/page/dialog/'}
  ]} />

## Example

```tsx example
<DialogTrigger>
  <ActionButton>Trigger</ActionButton>
  {(close) => (
    <Dialog>
      <Header><Heading>The Heading</Heading></Header>
      <Divider />
      <Content>
        <Text>
          This is a dialog.
        </Text>
      </Content>
      <ButtonGroup>
        <Button variant="secondary" onPress={close}>Cancel</Button>
        <Button variant="cta" onPress={close}>Confirm</Button>
      </ButtonGroup>
    </Dialog>
  )}
</DialogTrigger>
```

## Content

A standard Dialog has the following anatomy:

<svg xmlns="http://www.w3.org/2000/svg" width="611.999" height="372" viewBox="0 0 611.999 372">
  <g id="Group_72711" data-name="Group 72711" transform="translate(-297 -48)">
    <rect id="Background" width="480" height="372" rx="4" transform="translate(356 48)" fill="#f4f6fc"/>
    <g id="Rule" transform="translate(396 122)">
      <rect id="Placement_Area" data-name="Placement Area" width="400" height="2" fill="red" opacity="0"/>
      <rect id="Bar" width="400" height="2" rx="1" fill="#dae2f4"/>
    </g>
    <g id="Rectangle_138301" data-name="Rectangle 138301" transform="translate(396 140)" fill="rgba(74,111,195,0.05)" stroke="#a2b6e1" stroke-width="1" stroke-dasharray="4 2">
      <rect width="400" height="168" stroke="none"/>
      <rect x="0.5" y="0.5" width="399" height="167" fill="none"/>
    </g>
    <text id="Body_area" data-name="Body area" transform="translate(596 229)" fill="#496ec2" font-size="13" font-family="AdobeClean-It, Adobe Clean" font-style="italic"><tspan x="-25.818" y="0">Body area</tspan></text>
    <g id="Rectangle_138302" data-name="Rectangle 138302" transform="translate(608 348)" fill="rgba(74,111,195,0.05)" stroke="#a2b6e1" stroke-width="1" stroke-dasharray="4 2">
      <rect width="188" height="32" stroke="none"/>
      <rect x="0.5" y="0.5" width="187" height="31" fill="none"/>
    </g>
    <g id="Rectangle_138303" data-name="Rectangle 138303" transform="translate(570 88)" fill="none" stroke="#a2b6e1" stroke-width="1" stroke-dasharray="4 2">
      <rect width="226" height="22" stroke="none"/>
      <rect x="0.5" y="0.5" width="225" height="21" fill="none"/>
    </g>
    <g id="Rectangle_138450" data-name="Rectangle 138450" transform="translate(396 88)" fill="rgba(74,111,195,0.05)" stroke="#a2b6e1" stroke-width="1" stroke-dasharray="4 2">
      <rect width="150" height="22" stroke="none"/>
      <rect x="0.5" y="0.5" width="149" height="21" fill="none"/>
    </g>
    <g id="Rectangle_138449" data-name="Rectangle 138449" transform="translate(396 348)" fill="none" stroke="#a2b6e1" stroke-width="1" stroke-dasharray="4 2">
      <rect width="188" height="32" stroke="none"/>
      <rect x="0.5" y="0.5" width="187" height="31" fill="none"/>
    </g>
    <text id="Title_area" data-name="Title area" transform="translate(471 103)" fill="#496ec2" font-size="13" font-family="AdobeClean-It, Adobe Clean" font-style="italic"><tspan x="-23.608" y="0">Title area</tspan></text>
    <text id="Footer_content_area_optional_" data-name="Footer content area (optional)" transform="translate(490 368)" fill="#496ec2" font-size="13" font-family="AdobeClean-It, Adobe Clean" font-style="italic"><tspan x="-75.985" y="0">Footer content area (optional)</tspan></text>
    <text id="Header_content_area_optional_" data-name="Header content area (optional)" transform="translate(688 103)" fill="#496ec2" font-size="13" font-family="AdobeClean-It, Adobe Clean" font-style="italic"><tspan x="-78.11" y="0">Header content area (optional)</tspan></text>
    <text id="Button_group_area" data-name="Button group area" transform="translate(702 368)" fill="#496ec2" font-size="13" font-family="AdobeClean-It, Adobe Clean" font-style="italic"><tspan x="-46.169" y="0">Button group area</tspan></text>
    <text id="Header" transform="translate(870.999 103)" fill="#4a6fc3" font-size="13" font-family="AdobeClean-It, Adobe Clean" font-style="italic"><tspan x="0" y="0">Header</tspan></text>
    <text id="Footer" transform="translate(869.999 368)" fill="#4a6fc3" font-size="13" font-family="AdobeClean-It, Adobe Clean" font-style="italic"><tspan x="0" y="0">Footer</tspan></text>
    <text id="Body" transform="translate(869.999 228)" fill="#4a6fc3" font-size="13" font-family="AdobeClean-It, Adobe Clean" font-style="italic"><tspan x="0" y="0">Body</tspan></text>
    <rect id="Rectangle_138454" data-name="Rectangle 138454" width="8" height="1" transform="translate(853 99)" fill="#4a6fc3"/>
    <rect id="Rectangle_138456" data-name="Rectangle 138456" width="8" height="1" transform="translate(853 364)" fill="#4a6fc3"/>
    <rect id="Rectangle_138455" data-name="Rectangle 138455" width="8" height="1" transform="translate(853 224)" fill="#4a6fc3"/>
    <g id="Group_72702" data-name="Group 72702" transform="translate(0 -494)">
      <rect id="Rectangle_138451" data-name="Rectangle 138451" width="8" height="1" transform="translate(844 582)" fill="#4a6fc3"/>
      <rect id="Rectangle_138453" data-name="Rectangle 138453" width="1" height="22" transform="translate(852 582)" fill="#4a6fc3"/>
      <rect id="Rectangle_138452" data-name="Rectangle 138452" width="8" height="1" transform="translate(844 603)" fill="#4a6fc3"/>
    </g>
    <g id="Group_72704" data-name="Group 72704" transform="translate(0 -234)">
      <rect id="Rectangle_138451-2" data-name="Rectangle 138451" width="8" height="1" transform="translate(844 582)" fill="#4a6fc3"/>
      <rect id="Rectangle_138453-2" data-name="Rectangle 138453" width="1" height="32" transform="translate(852 582)" fill="#4a6fc3"/>
      <rect id="Rectangle_138452-2" data-name="Rectangle 138452" width="8" height="1" transform="translate(844 613)" fill="#4a6fc3"/>
    </g>
    <g id="Group_72703" data-name="Group 72703" transform="translate(0 -442)">
      <rect id="Rectangle_138451-3" data-name="Rectangle 138451" width="8" height="1" transform="translate(844 582)" fill="#4a6fc3"/>
      <rect id="Rectangle_138453-3" data-name="Rectangle 138453" width="1" height="168" transform="translate(852 582)" fill="#4a6fc3"/>
      <rect id="Rectangle_138452-3" data-name="Rectangle 138452" width="8" height="1" transform="translate(844 749)" fill="#4a6fc3"/>
    </g>
    <text id="Divider" transform="translate(334 126)" fill="#4a6fc3" font-size="13" font-family="AdobeClean-It, Adobe Clean" font-style="italic"><tspan x="-36.14" y="0">Divider</tspan></text>
    <path id="Union_58" data-name="Union 58" d="M-9114.949-372H-9168v-1h53.05a2.5,2.5,0,0,1,2.451-2,2.5,2.5,0,0,1,2.5,2.5,2.5,2.5,0,0,1-2.5,2.5A2.5,2.5,0,0,1-9114.949-372Z" transform="translate(9508 495.501)" fill="#718dcf"/>
  </g>
</svg>

Each of these sections can be populated by providing the following components to your Dialog as children:
`Header`, `Heading`, `Divider`, `Content` (for body), `ButtonGroup`, and `Footer`.


### Examples
A typical Dialog with a title, contents, and action buttons can be created like so:

```tsx example
<DialogTrigger>
  <ActionButton>Publish</ActionButton>
  {(close) => (
    <Dialog>
      <Header><Heading>Publish 3 pages</Heading></Header>
      <Divider />
      <Content>Confirm publish?</Content>
      <ButtonGroup>
        <Button variant="secondary" onPress={close}>Cancel</Button>
        <Button variant="cta" onPress={close} autoFocus>Confirm</Button>
      </ButtonGroup>
    </Dialog>
  )}
</DialogTrigger>
```

A dismissable Dialog forgoes a footer section and its associated action buttons in favor
of rendering a close button. If your Dialog is dismissable, make sure that you do not include a footer section or
a ButtonGroup. While the Dialog will hide any elements occupying the footer section, it will not remove them from the DOM, 
resulting in possible tab order issues.

```tsx example
<DialogTrigger isDismissable>
  <ActionButton>Status</ActionButton> 
  <Dialog>
    <Header><Heading>Status</Heading></Header>
    <Divider />
    <Content>Printer Status: Connected</Content>
  </Dialog>
</DialogTrigger>
```

It is important to note that the `Heading`, `Content`, and `Footer` content elements accept any renderable 
node, not just strings. This allows you to create Dialogs for more complex workflows, such as including a form
for the user to fill out or adding confirmation checkboxes.

```tsx example
<DialogTrigger>
  <ActionButton>Register</ActionButton> 
  {(close) => (
    <Dialog>
      <Header><Heading>Register for newsletter</Heading></Header>
      <Divider />
      <Content>
        <Form>
          <TextField label="First Name" placeholder="John" autoFocus />
          <TextField label="Last Name" placeholder="Smith" />
          <TextField label="Street Address" placeholder="123 Any Street" />
          <TextField label="City" placeholder="San Francisco" />
        </Form>
      </Content>
      <Footer>
        <Checkbox>
          I want to receive updates for exclusive offers in my area.
        </Checkbox>
      </Footer> 
      <ButtonGroup>
        <Button variant="secondary" onPress={close}>Cancel</Button>
        <Button variant="cta" onPress={close}>Register</Button>
      </ButtonGroup>
    </Dialog>
  )}
</DialogTrigger>
```

The example below illustrates how a Dialog with a hero image could be rendered via the `hero` slot:

```tsx example
<DialogTrigger>
  <ActionButton>Upload</ActionButton>
  {(close) => (
    <Dialog>
      <Image slot="hero" src="https://i.imgur.com/Z7AzH2c.png" objectFit="cover" />
      <Header><Heading>Upload file</Heading></Header>
      <Divider />
      <Content>Are you sure you want to upload this file?</Content>
      <ButtonGroup>
        <Button variant="secondary" onPress={close}>Cancel</Button>
        <Button variant="cta" onPress={close} autoFocus>Confirm</Button>
      </ButtonGroup>
    </Dialog>
  )}
</DialogTrigger>
```

### Accessibility

The tab order within the Dialog follows the order of the children provided to the Dialog so keep this in mind
when creating your Dialog. You are also responsible for determining what component, if any, should be automatically
focused on Dialog render. 

## Labeling

### Accessibility

The title of a Dialog is typically provided via its header. By default, the Dialog sets its 
`aria-labelledby` to match the header id, but this can be overridden by providing a `aria-labelledby` prop
to the Dialog directly. If a visible label isn't specified, an `aria-label` must be provided instead.

```tsx example
<DialogTrigger>
  <ActionButton>See Terms and Conditions</ActionButton>
  {(close) => (
    <Dialog aria-labelledby="heading-id">
      <Text slot="header" id="heading-id">Terms and Conditions</Text> 
      <Divider />
      <Content>
        <Text>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Mi proin sed libero enim. Mattis ullamcorper velit sed ullamcorper morbi tincidunt. Sed enim ut sem viverra aliquet eget sit amet tellus. Diam quis enim lobortis scelerisque fermentum dui faucibus in ornare. Diam quam nulla porttitor massa id. Eleifend mi in nulla posuere sollicitudin. Turpis nunc eget lorem dolor sed viverra ipsum nunc. Faucibus in ornare quam viverra. Risus commodo viverra maecenas accumsan lacus vel facilisis volutpat est. Nam libero justo laoreet sit amet cursus sit. Netus et malesuada fames ac. Dictum fusce ut placerat orci nulla pellentesque dignissim enim sit. Eros donec ac odio tempor orci. Ut etiam sit amet nisl purus in mollis nunc. Nisl rhoncus mattis rhoncus urna neque viverra. Convallis aenean et tortor at risus. Diam phasellus vestibulum lorem sed risus ultricies.</Text>
      </Content>
      <ButtonGroup>
        <Button autoFocus variant="cta" onPress={close}>Acknowledge</Button>
      </ButtonGroup>
    </Dialog>
  )}
</DialogTrigger>
```

## Events

For Dialogs, user defined callbacks should be chained with the DialogTrigger's `close` function in the press/click handler
of the Dialog's action buttons. The following example alerts if the Dialog's save or cancel button is clicked.

```tsx example
function Example() {
  let alertSave = (cb) => {
    cb();
    alert('Profile saved!');
  }

  let alertCancel = (cb) => {
    cb();
    alert('Profile not saved!');
  }

  return (
    <DialogTrigger>
      <ActionButton>Set Profile</ActionButton>
      {(close) => (
        <Dialog>
          <Header><Heading>Profile</Heading></Header>
          <Divider />
          <ButtonGroup>
            <Button autoFocus variant="cta" onPress={() => alertSave(close)}>Save</Button>
            <Button variant="secondary" onPress={() => alertCancel(close)}>Cancel</Button>
          </ButtonGroup>
          <Content>
            <Form>
              <TextField label="Name" />
              <Checkbox>Make private</Checkbox>
            </Form>
          </Content>    
        </Dialog>
      )}
    </DialogTrigger>
  );
}
```

Additionally, DialogTrigger accepts an `onOpenChange` prop which is triggered whenever the Dialog is opened or closed. 
For more information on the `onOpenChange` prop see [DialogTrigger page](TODO LINK HERE).

### Dismissable Dialogs

Dismissable Dialogs support a `onDismiss` prop which is triggered whenever the Dialog's close button is clicked.
Similar to non-dismissable dialogs, you must chain the DialogTrigger's `close` function with whatever callback you provide as
`onDismiss`.

```tsx example
function Example() {
  let alertDismiss = (cb) => {
    cb();
    alert('Dialog dismissed.');
  }

  return (
    <DialogTrigger isDismissable>
      <ActionButton>Info</ActionButton>
      {(close) => (
        <Dialog onDismiss={() => alertDismiss(close)}>
          <Header><Heading>Version Info</Heading></Header>
          <Divider />
          <Content>
            <Text>
              Version 1.0.0, Copyright 2020
            </Text>
          </Content>    
        </Dialog>
      )}
    </DialogTrigger>
  );
}
```

Note that `onDismiss` is optional. If you don't need to add a `onDismiss` handler to your dismissable Dialog, you may omit
the wrapping `close` function surround the Dialog.

## Props

<PropTable component={docs.exports.Dialog} links={docs.links} />

## Visual Options

### Size

Only `modal` type Dialogs support a user defined size prop. Note that the `fullscreen` and `fullscreenTakeover` sizes 
require the [DialogTrigger `type`](TODO LINK) prop to be set as `fullscreen` and `fullscreenTakeover` respectively for container sizing
considerations.

```tsx example
<DialogTrigger>
  <ActionButton>Set Profile</ActionButton>
  {(close) => (
    <Dialog size="S">
      <Header><Heading>Profile</Heading></Header>
      <Divider />
      <ButtonGroup>
        <Button autoFocus variant="cta" onPress={close}>Save</Button>
        <Button variant="secondary" onPress={close}>Cancel</Button>
      </ButtonGroup>
      <Content>
        <Form>
          <TextField label="Name" />
          <Checkbox>Make private</Checkbox>
        </Form>
      </Content>    
    </Dialog>
  )}
</DialogTrigger>

<DialogTrigger>
  <ActionButton>Set Profile</ActionButton>
  {(close) => (
    <Dialog size="M">
      <Header><Heading>Profile</Heading></Header>
      <Divider />
      <ButtonGroup>
        <Button autoFocus variant="cta" onPress={close}>Save</Button>
        <Button variant="secondary" onPress={close}>Cancel</Button>
      </ButtonGroup>
      <Content>
        <Form>
          <TextField label="Name" />
          <Checkbox>Make private</Checkbox>
        </Form>
      </Content>    
    </Dialog>
  )}
</DialogTrigger>

<DialogTrigger>
  <ActionButton>Set Profile</ActionButton>
  {(close) => (
    <Dialog size="L">
      <Header><Heading>Profile</Heading></Header>
      <Divider />
      <ButtonGroup>
        <Button autoFocus variant="cta" onPress={close}>Save</Button>
        <Button variant="secondary" onPress={close}>Cancel</Button>
      </ButtonGroup>
      <Content>
        <Form>
          <TextField label="Name" />
          <Checkbox>Make private</Checkbox>
        </Form>
      </Content>    
    </Dialog>
  )}
</DialogTrigger>
```
