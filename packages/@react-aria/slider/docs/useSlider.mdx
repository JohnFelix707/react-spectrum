<!-- Copyright 2020 Adobe. All rights reserved.
This file is licensed to you under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License. You may obtain a copy
of the License at http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS
OF ANY KIND, either express or implied. See the License for the specific language
governing permissions and limitations under the License. -->

import {Layout} from '@react-spectrum/docs';
export default Layout;

import docs from 'docs:@react-aria/slider';
import {HeaderInfo, FunctionAPI, TypeContext, InterfaceType, TypeLink} from '@react-spectrum/docs';
import packageData from '@react-aria/slider/package.json';
import statelyDocs from 'docs:@react-stately/slider';
import i18nDocs from 'docs:@react-aria/i18n';

```jsx import
import {useSlider, useSliderThumb} from '@react-aria/slider';
```

---
category: Forms
keywords: [slider, range, aria]
---

# useSlider

<p>{docs.exports.useSlider.description}</p>

<HeaderInfo
  packageData={packageData}
  componentNames={['useSlider', 'useSliderThumb']}
  sourceData={[
    {type: 'W3C', url: 'https://www.w3.org/TR/wai-aria-1.2/#slider'}
  ]} />


## API

<FunctionAPI function={docs.exports.useSlider} links={docs.links} />
<FunctionAPI function={docs.exports.useSliderThumb} links={docs.links} />

## Features

The [&lt;input type="range"&gt;](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/range)
HTML element can be used to build a slider, however it is
very difficult to style cross browser. `useSlider` and `useSliderThumb` help achieve accessible
sliders that can be styled as needed.


* Exposed to assistive technology as a `group` and `slider` via ARIA, and touch screen readers with hidden native inputs
* Labeling support for accessibility
* Internationalized number formatting as a percentage or value
* Support for multiple thumbs, e.g. a group of range values
* Support for both horizontal and vertical orientations
* Support for touch [useMove](../react-aria/useMove.html)

## Anatomy

Sliders consist of a track element showing the range of available values,
a thumb or multiple thumbs showing the current value(s), and a label.
Thumbs consist of an indicator that designates a position on the track.
The track element represents the value(s) visually, the thumbs represent individual
values with `role=slider`. The group of value(s) is represented by the wrapping element
with `role=group`.

### useSlider hook
`useSlider` returns three sets of props that you should spread onto the appropriate element:

<TypeContext.Provider value={docs.links}>
  <InterfaceType properties={docs.links[docs.exports.useSlider.return.id].properties} />
</TypeContext.Provider>

If there is no visual label, an `aria-label` or `aria-labelledby` prop must be passed instead
to identify the element to screen readers.

### useSliderThumb hook
`useSliderThumb` returns three sets of props that you should spread onto the appropriate element:

<TypeContext.Provider value={docs.links}>
  <InterfaceType properties={docs.links[docs.exports.useSliderThumb.return.id].properties} />
</TypeContext.Provider>

If there is no visual label, an `aria-label` or `aria-labelledby` prop must be passed instead
to identify the element to screen readers.

Slider thumb value(s) are managed by <TypeLink links={statelyDocs.links} type={statelyDocs.exports.useSliderState} />.

## Examples

### Single Thumb

```tsx example
import {useSliderState} from '@react-stately/slider';
import {useFocusWithin} from '@react-aria/interactions';
import {VisuallyHidden} from '@react-aria/visually-hidden';

function Thumb(props) {
  let {state, trackRef, index, ...otherprops} = props;
  let inputRef = React.useRef(null);
  let {thumbProps, inputProps} = useSliderThumb({
    index,
    isDisabled: props.isDisabled,
    trackRef,
    inputRef
  }, state);

  let [focus, setFocus] = React.useState(false);
  let {focusWithinProps} = useFocusWithin({onFocusWithinChange: setFocus});
  return (
    <div
      {...focusWithinProps}
      style={{
        position: 'absolute',
        top: '4px',
        transform: 'translateX(-50%)',
        display: 'flex',
        flexDirection: 'column',
        alignItems: 'center',
        left: `${state.getThumbPercent(index) * 100}%`
      }}>
      <div
        {...thumbProps}
        style={{
          width: '20px',
          height: '20px',
          borderRadius: '50%',
          border: `2px solid ${focus ? 'orange' : 'grey'}`,
          boxSizing: 'border-box',
          backgroundColor: 'var(--spectrum-global-color-gray-100)',
          display: 'flex',
          alignItems: 'center',
          justifyContent: 'center'
        }}>
        <VisuallyHidden><input ref={inputRef} {...inputProps} /></VisuallyHidden>
      </div>
    </div>
  );
}

function Slider(props) {
  let trackRef = React.useRef(null);

  let state = useSliderState(props);
  let {
    containerProps,
    trackProps,
    labelProps
  } = useSlider(props, state, trackRef);

  return (
      <div
        style={{position: 'relative', display: 'flex', flexDirection: 'column', alignItems: 'center', width: '300px'}}
        {...containerProps}>
        <div style={{display: 'flex', alignSelf: 'stretch'}}>
          {props.label && <label {...labelProps}>{props.label}</label>}
          <div style={{flex: '1 0 auto', textAlign: 'end'}}>{state.getThumbValueLabel(0)}</div>
        </div>
        <div style={{position: 'relative', width: '100%'}}>
          {
            // We make rail, filledRail, and track siblings in the DOM, so that trackRef has no children.
            // User must click on the trackRef to drag by track, and so it comes last in the DOM.
          }
          <div style={{
            position: 'absolute',
            backgroundColor: 'grey',
            height: '3px',
            top: '13px',
            width: '100%'
          }} />
          <div
            ref={trackRef}
            style={{
              position: 'relative',
              height: '30px',
              width:' 100%'
            }}
            {...trackProps} />
          <Thumb index={0} state={state} trackRef={trackRef} />
        </div>
      </div>
  );
}

<Slider
  label="Opacity"
  formatOptions={{style: 'percent'}}
  maxValue={1}
  step={0.01} />
```

### Multi Thumb
```tsx example
function Thumb(props) {
  let {state, trackRef, index, ...otherprops} = props;
  let inputRef = React.useRef(null);
  let {thumbProps, inputProps} = useSliderThumb({
    index,
    isDisabled: props.isDisabled,
    trackRef,
    inputRef
  }, state);

  let [focus, setFocus] = React.useState(false);
  let {focusWithinProps} = useFocusWithin({onFocusWithinChange: setFocus});
  return (
    <div
      {...focusWithinProps}
      style={{
        position: 'absolute',
        top: '4px',
        transform: 'translateX(-50%)',
        display: 'flex',
        flexDirection: 'column',
        alignItems: 'center',
        left: `${state.getThumbPercent(index) * 100}%`
      }}>
      <div
        {...thumbProps}
        style={{
          width: '20px',
          height: '20px',
          borderRadius: '50%',
          border: `2px solid ${focus ? 'orange' : 'grey'}`,
          boxSizing: 'border-box',
          backgroundColor: 'var(--spectrum-global-color-gray-100)',
          display: 'flex',
          alignItems: 'center',
          justifyContent: 'center'
        }}>
        <VisuallyHidden><input ref={inputRef} {...inputProps} /></VisuallyHidden>
      </div>
    </div>
  );
}

function RangeSlider(props) {
  let trackRef = React.useRef(null);

  let state = useSliderState(props);
  let {
    containerProps,
    trackProps,
    labelProps
  } = useSlider(props, state, trackRef);

  return (
      <div
        style={{position: 'relative', display: 'flex', flexDirection: 'column', alignItems: 'center', width: '300px'}}
        {...containerProps}>
        <div style={{display: 'flex', alignSelf: 'stretch'}}>
          {props.label && <label {...labelProps}>{props.label}</label>}
          <div style={{flex: '1 0 auto', textAlign: 'end'}}>{`${state.getThumbValueLabel(0)} - ${state.getThumbValueLabel(1)}`}</div>
        </div>
        <div style={{position: 'relative', width: '100%'}}>
          <div style={{
            position: 'absolute',
            backgroundColor: 'grey',
            height: '3px',
            top: '13px',
            width: '100%'
          }} />
          <div
            ref={trackRef}
            style={{
              position: 'relative',
              height: '30px',
              width:' 100%'
            }}
            {...trackProps} />
          <Thumb index={0} state={state} trackRef={trackRef} />
          <Thumb index={1} state={state} trackRef={trackRef} />
        </div>
      </div>
  );
}

<RangeSlider
  label="Price Range"
  formatOptions={{style: 'currency', currency: 'USD'}}
  maxValue={500}
  defaultValue={[100, 350]}
  step={10} />
```

## Internationalization

### Value formatting

Formatting the value that should be displayed in the value label or `aria-valuetext`
is handled by <TypeLink links={statelyDocs.links} type={statelyDocs.exports.useSliderState} />.
The formatting can be controlled using the `formatOptions` prop.
If you want to change locales, the <TypeLink links={i18nDocs.links} type={i18nDocs.exports.I18nProvider} />
must be somewhere in the hierarchy above the Slider.
This will tell the formatter what locale to use.

### RTL

In right-to-left languages, the slider should be mirrored. The label is right-aligned,
the value is left-aligned. Ensure that your CSS accounts for this.
